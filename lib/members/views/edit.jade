extends ../../../views/layout

include  ../../../views/formComponents

block scripts
  script(src="/clientscripts/check-memberform.js")


block title
  - if (accessrights.isRegistered())
    | #{t("members.edit")}
  - else
    | #{t("members.create")}

block content
  form(id='memberform', action='/members/submit',method='post')
    fieldset
      .row
        .col-md-12
          
          h2 
            if (accessrights.isRegistered())
              | "#{member.nickname}"
            else
              | #{t("members.new")}
            .btn-group.pull-right
              if (accessrights.isRegistered())
                if (accessrights.isMember(member))
                  a.btn.btn-default(href="/auth/logout", type="cancel") #{t("general.logout")}
                a.btn.btn-default(href="javascript:history.back()", type="cancel") #{t("general.back")}
              else
                a.btn.btn-danger(href="/auth/logout", type="cancel") #{t("members.cancel")}
              button.btn.btn-primary(type="submit") #{t("general.save")}

      .row
        .col-md-12
          legend #{t("members.group_membership")}
          mixin groupCheckboxes('newSubscriptions', regionalgroups, themegroups)
      .row
        .col-md-12
          legend #{t("members.personal_data")}
      .row
        .col-md-6
          mixin hidden('id', member)
          mixin hidden('previousNickname', member, 'nickname')
          mixin hiddenWithValue('previousEmail', accessrights.isRegistered() ? member.email : '')
          mixin hidden('created', member)
          mixin text('nickname', t("members.nickname"), member)
          mixin text('firstname', t("members.firstname"), member)
          mixin text('lastname', t("members.lastname"), member)
          mixin text('email', t("members.email"), member)
          mixin twitter('twitter', t("members.twitter"), member)
        .col-md-6
          mixin text('location', t("members.location"), member)
          mixin text('profession', t("members.profession"), member)
          mixin text('interests', t("members.interests"), member)
          mixin text('site', t("members.web"), member)
          mixin text('reference', t("members.reference"), member)
          if (accessrights.isAdmin())
            mixin checkbox('isAdmin', t("members.administrator"), !!member.isAdmin)
      if (accessrights.isRegistered())
        .row
          .col-md-12
            legend #{t("members.authenticated_via")}:
            ul
              each auth in member.authentications
                li #{auth}
        if (accessrights.isMember(member))
          .row
            .col-md-6
              a.btn.btn-primary(data-toggle="modal", href="#login")
                i.fa.fa-plus-square.fa-fw
                | &nbsp;#{t("members.authenticate")}
