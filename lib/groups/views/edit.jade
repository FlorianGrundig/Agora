extends ../../../views/layout

include  ../../../views/formComponents

block scripts
  script(src="/clientscripts/check-groupform.js")

block title
  if (group.id)
    | #{t("groups.edit", {groupId: group.id})}
  else
    |  #{t("groups.create")}

block content
  form(id='groupform', action='/groups/submit', method='post')
    fieldset
      .row
        .col-md-12
          legend
            if (group.id)
              |  #{t("groups.edit", {groupId: group.id})}
            else
              |  #{t("groups.create")}
      .row
        .col-md-6
          if (group.id)
            mixin textReadonly('id', t("general.name"), group)
          else
            mixin textWithValue('id', t("general.name"), group.id, t("groups.tooltip.name"))
          mixin textWithValue('longName', t("general.title"), group.longName, t("groups.tooltip.title"))
        .col-md-6
          if (group.id)
            mixin textReadonly('emailPrefix', t("groups.email_prefix"), group)
          else
            mixin textWithValue('emailPrefix', t("groups.email_prefix"), group.emailPrefix, t("groups.tooltip.email_prefix"))
          mixin colorPicker('color', group)
      .row
        .col-md-12
          mixin hightextarea('description', t("general.description"), group)
      .row
        .col-md-6
          .form-group
            label.control-label(for="type") #{t("groups.type")}:
            select#type.form-control(name="type")
              for item in allTypes
                option(selected=group.type === item) #{item}

          h4 #{t("groups.contacts")}
          .control-group
            each memberAdmin in organizersChecked
              mixin checkbox('organizers', memberAdmin.member.nickname(), memberAdmin.checked, memberAdmin.member.id())
        .col-md-6
          .row
            .col-md-6
              mixin textWithValue('mapX', t("groups.x_coord"), group.mapX, t("groups.tooltip.x_coord"))
            .col-md-6
              mixin textWithValue('mapY', t("groups.y_coord"), group.mapY, t("groups.tooltip.y_coord"))
          mixin textWithValue('shortName', t("groups.map_label"), group.shortName, t("groups.tooltip.map_label"))
      .row
        .col-md-12
          if group.id
            button.btn.btn-primary.pull-right(type="submit") #{t("general.save")}
          else
            button.btn.btn-primary.pull-right(type="submit") #{t("general.create")}
          a.btn.btn-default.pull-right(href="javascript:history.back()", type="cancel") #{t("general.back")}

block scripts
  script(src="/clientscripts/check-groupform.js")
